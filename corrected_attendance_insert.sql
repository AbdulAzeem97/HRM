-- ===============================================
-- CORRECTED ATTENDANCE DATA FOR EMPLOYEE ID 65
-- MAY 2025 - EXCLUDING SUNDAYS (WEEKDAYS ONLY)
-- ===============================================

USE `u902429527_ttphrm`;

-- 7. SAMPLE ATTENDANCE DATA FOR EMPLOYEE ID 65 (MAY 2025 - EXCLUDING SUNDAYS)
-- ---------------------------------------------------------------------------------
-- Note: Sundays in May 2025 are: 4th, 11th, 18th, 25th - These are excluded

INSERT INTO attendances (employee_id, attendance_date, clock_in, clock_out, clock_in_ip, clock_out_ip, clock_in_out, time_late, early_leaving, overtime, total_work, total_rest, attendance_status)
VALUES
    -- Thursday, May 1, 2025
    (65, '2025-05-01', '08:00:00', '17:15:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:00', '00:15', '09:15', '00:45', 'Present'),

    -- Friday, May 2, 2025
    (65, '2025-05-02', '08:10:00', '17:30:00', '127.0.0.1', '127.0.0.1', 0, '00:10', '00:00', '00:30', '09:20', '00:40', 'Present'),

    -- Saturday, May 3, 2025
    (65, '2025-05-03', '08:00:00', '13:00:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '04:15', '00:00', '05:00', '00:00', 'Half Day'),

    -- SUNDAY MAY 4 - EXCLUDED (WEEKEND)

    -- Monday, May 5, 2025
    (65, '2025-05-05', '08:00:00', '17:00:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:15', '00:00', '09:00', '01:00', 'Present'),

    -- Tuesday, May 6, 2025
    (65, '2025-05-06', '08:15:00', '17:45:00', '127.0.0.1', '127.0.0.1', 0, '00:15', '00:00', '00:45', '09:30', '00:30', 'Present'),

    -- Wednesday, May 7, 2025
    (65, '2025-05-07', '08:00:00', '17:00:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:15', '00:00', '09:00', '01:00', 'Present'),

    -- Thursday, May 8, 2025
    (65, '2025-05-08', '07:45:00', '18:00:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:00', '01:15', '10:15', '00:00', 'Present'),

    -- Friday, May 9, 2025
    (65, '2025-05-09', '08:30:00', '17:00:00', '127.0.0.1', '127.0.0.1', 0, '00:30', '00:15', '00:00', '08:30', '01:30', 'Present'),

    -- Saturday, May 10, 2025
    (65, '2025-05-10', '08:00:00', '14:00:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '03:15', '00:00', '06:00', '00:00', 'Half Day'),

    -- SUNDAY MAY 11 - EXCLUDED (WEEKEND)

    -- Monday, May 12, 2025
    (65, '2025-05-12', '08:00:00', '16:30:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:45', '00:00', '08:30', '01:30', 'Early Leave'),

    -- Tuesday, May 13, 2025
    (65, '2025-05-13', '08:05:00', '17:20:00', '127.0.0.1', '127.0.0.1', 0, '00:05', '00:00', '00:20', '09:15', '00:45', 'Present'),

    -- Wednesday, May 14, 2025
    (65, '2025-05-14', '08:00:00', '17:15:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:00', '00:15', '09:15', '00:45', 'Present'),

    -- Thursday, May 15, 2025
    (65, '2025-05-15', '08:20:00', '18:30:00', '127.0.0.1', '127.0.0.1', 0, '00:20', '00:00', '01:30', '10:10', '00:00', 'Present'),

    -- Friday, May 16, 2025
    (65, '2025-05-16', '08:00:00', '13:00:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '04:15', '00:00', '05:00', '00:00', 'Half Day'),

    -- Saturday, May 17, 2025
    (65, '2025-05-17', '08:00:00', '17:00:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:15', '00:00', '09:00', '01:00', 'Present'),

    -- SUNDAY MAY 18 - EXCLUDED (WEEKEND)

    -- Monday, May 19, 2025
    (65, '2025-05-19', '08:00:00', '19:00:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:00', '02:00', '11:00', '00:00', 'Present'),

    -- Tuesday, May 20, 2025
    (65, '2025-05-20', '08:45:00', '17:00:00', '127.0.0.1', '127.0.0.1', 0, '00:45', '00:15', '00:00', '08:15', '01:45', 'Present'),

    -- Wednesday, May 21, 2025
    (65, '2025-05-21', '08:00:00', '17:30:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:00', '00:30', '09:30', '00:30', 'Present'),

    -- Thursday, May 22, 2025
    (65, '2025-05-22', '08:10:00', '17:10:00', '127.0.0.1', '127.0.0.1', 0, '00:10', '00:05', '00:00', '09:00', '01:00', 'Present'),

    -- Friday, May 23, 2025
    (65, '2025-05-23', '08:00:00', '12:30:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '04:45', '00:00', '04:30', '00:00', 'Half Day'),

    -- Saturday, May 24, 2025
    (65, '2025-05-24', '08:00:00', '17:00:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:15', '00:00', '09:00', '01:00', 'Present'),

    -- SUNDAY MAY 25 - EXCLUDED (WEEKEND)

    -- Monday, May 26, 2025
    (65, '2025-05-26', '07:50:00', '18:00:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:00', '01:10', '10:10', '00:00', 'Present'),

    -- Tuesday, May 27, 2025
    (65, '2025-05-27', '08:15:00', '17:00:00', '127.0.0.1', '127.0.0.1', 0, '00:15', '00:15', '00:00', '08:45', '01:15', 'Present'),

    -- Wednesday, May 28, 2025
    (65, '2025-05-28', '08:00:00', '17:15:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:00', '00:15', '09:15', '00:45', 'Present'),

    -- Thursday, May 29, 2025
    (65, '2025-05-29', '08:00:00', '18:30:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:00', '01:30', '10:30', '00:00', 'Present'),

    -- Friday, May 30, 2025
    (65, '2025-05-30', '08:05:00', '17:00:00', '127.0.0.1', '127.0.0.1', 0, '00:05', '00:15', '00:00', '08:55', '01:05', 'Present'),

    -- Saturday, May 31, 2025
    (65, '2025-05-31', '08:00:00', '17:00:00', '127.0.0.1', '127.0.0.1', 0, '00:00', '00:15', '00:00', '09:00', '01:00', 'Present');

-- Verification Query
SELECT
    DATE_FORMAT(attendance_date, '%W, %M %d, %Y') as day_name,
    attendance_date,
    clock_in,
    clock_out,
    total_work,
    overtime,
    attendance_status
FROM attendances
WHERE employee_id = 65
AND attendance_date BETWEEN '2025-05-01' AND '2025-05-31'
ORDER BY attendance_date;

-- Summary Query
SELECT
    COUNT(*) as total_attendance_days,
    SUM(CASE WHEN attendance_status = 'Present' THEN 1 ELSE 0 END) as present_days,
    SUM(CASE WHEN attendance_status = 'Half Day' THEN 1 ELSE 0 END) as half_days,
    SUM(CASE WHEN attendance_status = 'Early Leave' THEN 1 ELSE 0 END) as early_leave_days,
    SUM(CASE WHEN DAYOFWEEK(attendance_date) = 1 THEN 1 ELSE 0 END) as sunday_count
FROM attendances
WHERE employee_id = 65
AND attendance_date BETWEEN '2025-05-01' AND '2025-05-31';