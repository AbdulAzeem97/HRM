-- =====================================================
-- COMPREHENSIVE MOCK ATTENDANCE DATA GENERATOR
-- One Month with All Scenarios: Overtime, Late, Early Leave, Shift Selection
-- =====================================================

-- Clear existing data for the month (adjust date range as needed)
DELETE FROM attendances WHERE attendance_date >= '2025-01-01' AND attendance_date <= '2025-01-31';

-- Add required columns if they don't exist
ALTER TABLE attendances ADD COLUMN IF NOT EXISTS working_hours DECIMAL(4,2) DEFAULT 0;
ALTER TABLE attendances ADD COLUMN IF NOT EXISTS overtime_hours DECIMAL(4,2) DEFAULT 0;
ALTER TABLE attendances ADD COLUMN IF NOT EXISTS late_minutes INT DEFAULT 0;
ALTER TABLE attendances ADD COLUMN IF NOT EXISTS early_leave_minutes INT DEFAULT 0;
ALTER TABLE attendances ADD COLUMN IF NOT EXISTS shift_id INT;
ALTER TABLE attendances ADD COLUMN IF NOT EXISTS is_half_day BOOLEAN DEFAULT FALSE;
ALTER TABLE attendances ADD COLUMN IF NOT EXISTS late_deduction DECIMAL(10,2) DEFAULT 0;
ALTER TABLE attendances ADD COLUMN IF NOT EXISTS overtime_amount DECIMAL(10,2) DEFAULT 0;

-- =====================================================
-- SHIFT DEFINITIONS
-- =====================================================
-- Shift-A: 07:00-15:45 (8.75 hours)
-- General: 08:00-17:15 (9.25 hours) 
-- 11:00-20:15: 11:00-20:15 (9.25 hours)
-- Shift-B: 15:00-23:45 (8.75 hours)
-- 19:00-04:15: 19:00-04:15 (9.25 hours)
-- Shift-C: 23:00-07:15 (8.25 hours)

-- =====================================================
-- EMPLOYEE 61 - MUHAMMAD UZAIR SIDDIQUI
-- Mixed scenarios: Normal, Late, Overtime, Early Leave
-- =====================================================

-- Week 1: Normal attendance with some variations
INSERT INTO attendances (employee_id, attendance_date, clock_in, clock_out, clock_in_ip, clock_out_ip, clock_in_out, time_late, early_leaving, overtime, total_work, attendance_status) VALUES
-- Monday - Normal (Shift-A: 07:00-15:45)
(61, '2025-01-01', '07:00', '15:45', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:00', '08:45', 'present'),

-- Tuesday - Late arrival (15 minutes late)
(61, '2025-01-02', '07:15', '15:45', '192.168.1.100', '192.168.1.100', 1, '00:15', '00:00', '00:00', '08:30', 'present'),

-- Wednesday - Overtime (1 hour)
(61, '2025-01-03', '07:00', '16:45', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '01:00', '09:45', 'present'),

-- Thursday - Early leave (30 minutes early)
(61, '2025-01-04', '07:00', '15:15', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:30', '00:00', '08:15', 'present'),

-- Friday - Perfect attendance
(61, '2025-01-05', '07:00', '15:45', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:00', '08:45', 'present'),

-- Saturday - Half day (General shift: 08:00-17:15)
(61, '2025-01-06', '08:00', '12:30', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:00', '04:30', 'half_day'),

-- Week 2: More variations
-- Monday - Very late (45 minutes late)
(61, '2025-01-08', '07:45', '15:45', '192.168.1.100', '192.168.1.100', 1, '00:45', '00:00', '00:00', '08:00', 'present'),

-- Tuesday - Maximum overtime (2 hours)
(61, '2025-01-09', '07:00', '17:45', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '02:00', '10:45', 'present'),

-- Wednesday - Early leave with some overtime
(61, '2025-01-10', '07:00', '16:00', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:15', '09:00', 'present'),

-- Thursday - Absent (no record)

-- Friday - Perfect attendance
(61, '2025-01-12', '07:00', '15:45', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:00', '08:45', 'present'),

-- Saturday - Late with overtime
(61, '2025-01-13', '08:30', '18:00', '192.168.1.100', '192.168.1.100', 1, '01:30', '00:00', '01:15', '09:30', 'present'),

-- Week 3: Different shift patterns
-- Monday - 11:00-20:15 shift (perfect)
(61, '2025-01-15', '11:00', '20:15', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:00', '09:15', 'present'),

-- Tuesday - 11:00-20:15 shift (late)
(61, '2025-01-16', '11:30', '20:15', '192.168.1.100', '192.168.1.100', 1, '00:30', '00:00', '00:00', '08:45', 'present'),

-- Wednesday - 11:00-20:15 shift (overtime)
(61, '2025-01-17', '11:00', '21:00', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:45', '10:00', 'present'),

-- Thursday - Shift-B (15:00-23:45)
(61, '2025-01-18', '15:00', '23:45', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:00', '08:45', 'present'),

-- Friday - Shift-B (late)
(61, '2025-01-19', '15:20', '23:45', '192.168.1.100', '192.168.1.100', 1, '00:20', '00:00', '00:00', '08:25', 'present'),

-- Saturday - Night shift (19:00-04:15)
(61, '2025-01-20', '19:00', '04:15', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:00', '09:15', 'present'),

-- Week 4: Edge cases and special scenarios
-- Monday - Very early (Shift-A but early)
(61, '2025-01-22', '06:30', '15:45', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:30', '09:15', 'present'),

-- Tuesday - Very late (almost half day)
(61, '2025-01-23', '09:00', '15:45', '192.168.1.100', '192.168.1.100', 1, '02:00', '00:00', '00:00', '06:45', 'half_day'),

-- Wednesday - Perfect attendance
(61, '2025-01-24', '07:00', '15:45', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:00', '08:45', 'present'),

-- Thursday - Early leave (1 hour early)
(61, '2025-01-25', '07:00', '14:45', '192.168.1.100', '192.168.1.100', 1, '00:00', '01:00', '00:00', '07:45', 'present'),

-- Friday - Maximum overtime with late arrival
(61, '2025-01-26', '07:30', '17:30', '192.168.1.100', '192.168.1.100', 1, '00:30', '00:00', '01:45', '10:00', 'present'),

-- Saturday - Half day (General shift)
(61, '2025-01-27', '08:00', '12:00', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:00', '04:00', 'half_day'),

-- Week 5: Final week
-- Monday - Perfect attendance
(61, '2025-01-29', '07:00', '15:45', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:00', '08:45', 'present'),

-- Tuesday - Absent (no record)

-- Wednesday - Perfect attendance
(61, '2025-01-31', '07:00', '15:45', '192.168.1.100', '192.168.1.100', 1, '00:00', '00:00', '00:00', '08:45', 'present');

-- =====================================================
-- EMPLOYEE 8 - MR. ADAN ISHAAQ (Test Case for 11:00-20:15)
-- Perfect test case for shift detection
-- =====================================================

INSERT INTO attendances (employee_id, attendance_date, clock_in, clock_out, clock_in_ip, clock_out_ip, clock_in_out, time_late, early_leaving, overtime, total_work, attendance_status) VALUES
-- Week 1: Perfect 11:00-20:15 pattern
(8, '2025-01-01', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-02', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-03', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-04', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-05', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-06', '11:00', '16:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '05:15', 'half_day'),

-- Week 2: Variations
(8, '2025-01-08', '11:15', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:15', '00:00', '00:00', '09:00', 'present'),
(8, '2025-01-09', '11:00', '21:00', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:45', '10:00', 'present'),
(8, '2025-01-10', '11:00', '19:45', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:30', '00:00', '08:45', 'present'),
(8, '2025-01-12', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-13', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),

-- Week 3: More variations
(8, '2025-01-15', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-16', '11:30', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:30', '00:00', '00:00', '08:45', 'present'),
(8, '2025-01-17', '11:00', '21:30', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '01:15', '10:30', 'present'),
(8, '2025-01-18', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-19', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-20', '11:00', '16:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '05:15', 'half_day'),

-- Week 4: Edge cases
(8, '2025-01-22', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-23', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-24', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-25', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-26', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-27', '11:00', '16:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '05:15', 'half_day'),

-- Week 5: Final week
(8, '2025-01-29', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(8, '2025-01-31', '11:00', '20:15', '192.168.1.101', '192.168.1.101', 1, '00:00', '00:00', '00:00', '09:15', 'present');

-- =====================================================
-- EMPLOYEE 1 - General Shift Pattern (08:00-17:15)
-- =====================================================

INSERT INTO attendances (employee_id, attendance_date, clock_in, clock_out, clock_in_ip, clock_out_ip, clock_in_out, time_late, early_leaving, overtime, total_work, attendance_status) VALUES
-- Week 1: Normal pattern
(1, '2025-01-01', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-02', '08:15', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:15', '00:00', '00:00', '09:00', 'present'),
(1, '2025-01-03', '08:00', '18:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '01:00', '10:15', 'present'),
(1, '2025-01-04', '08:00', '16:45', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:30', '00:00', '08:45', 'present'),
(1, '2025-01-05', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-06', '08:00', '12:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '04:15', 'half_day'),

-- Week 2: More variations
(1, '2025-01-08', '08:30', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:30', '00:00', '00:00', '08:45', 'present'),
(1, '2025-01-09', '08:00', '18:30', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '01:15', '10:30', 'present'),
(1, '2025-01-10', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-12', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-13', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),

-- Continue with more data for other weeks...
(1, '2025-01-15', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-16', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-17', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-18', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-19', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-20', '08:00', '12:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '04:15', 'half_day'),

(1, '2025-01-22', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-23', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-24', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-25', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-26', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-27', '08:00', '12:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '04:15', 'half_day'),

(1, '2025-01-29', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present'),
(1, '2025-01-31', '08:00', '17:15', '192.168.1.102', '192.168.1.102', 1, '00:00', '00:00', '00:00', '09:15', 'present');

-- =====================================================
-- SUMMARY QUERIES
-- =====================================================

-- Show attendance summary
SELECT 
    'ATTENDANCE SUMMARY' as info,
    COUNT(*) as total_records,
    COUNT(DISTINCT employee_id) as employees,
    MIN(attendance_date) as start_date,
    MAX(attendance_date) as end_date
FROM attendances 
WHERE attendance_date >= '2025-01-01' AND attendance_date <= '2025-01-31';

-- Show employee-wise summary
SELECT 
    employee_id,
    COUNT(*) as total_days,
    SUM(CASE WHEN time_late > '00:00' THEN 1 ELSE 0 END) as late_days,
    SUM(CASE WHEN overtime > '00:00' THEN 1 ELSE 0 END) as overtime_days,
    SUM(CASE WHEN early_leaving > '00:00' THEN 1 ELSE 0 END) as early_leave_days,
    SUM(CASE WHEN attendance_status = 'half_day' THEN 1 ELSE 0 END) as half_days
FROM attendances 
WHERE attendance_date >= '2025-01-01' AND attendance_date <= '2025-01-31'
GROUP BY employee_id
ORDER BY employee_id;

-- Show shift patterns detected
SELECT 
    employee_id,
    attendance_date,
    clock_in,
    clock_out,
    total_work,
    CASE 
        WHEN clock_in BETWEEN '06:00' AND '08:00' THEN 'Shift-A (07:00-15:45)'
        WHEN clock_in BETWEEN '07:30' AND '09:30' THEN 'General (08:00-17:15)'
        WHEN clock_in BETWEEN '10:30' AND '12:30' THEN '11:00-20:15'
        WHEN clock_in BETWEEN '14:00' AND '16:00' THEN 'Shift-B (15:00-23:45)'
        WHEN clock_in BETWEEN '18:00' AND '20:00' THEN '19:00-04:15'
        WHEN clock_in BETWEEN '22:00' AND '24:00' OR clock_in BETWEEN '00:00' AND '02:00' THEN 'Shift-C (23:00-07:15)'
        ELSE 'Unknown Shift'
    END as detected_shift
FROM attendances 
WHERE attendance_date >= '2025-01-01' AND attendance_date <= '2025-01-31'
ORDER BY employee_id, attendance_date;

SELECT 'Mock attendance data generation completed successfully!' as result;

