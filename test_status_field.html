<!DOCTYPE html>
<html>
<head>
    <title>Status Field Test - Optional with Active/Inactive Options</title>
    <link rel="stylesheet" href="vendor/bootstrap/css/bootstrap.min.css">
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; }
        .test-section { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .success { background: #d4edda; border-color: #c3e6cb; }
        .info { background: #e7f3ff; border-color: #b3d4fc; }
        .form-group { margin: 15px 0; }
        label { font-weight: bold; display: block; margin-bottom: 5px; }
        select { width: 300px; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        .btn { padding: 10px 20px; margin: 5px; cursor: pointer; border: none; border-radius: 4px; }
        .btn-primary { background: #007bff; color: white; }
        .btn-success { background: #28a745; color: white; }
        .result { margin-top: 10px; padding: 10px; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>üìã Status Field Test - Optional with Active/Inactive Options</h1>

    <div class="test-section info">
        <h3>‚úÖ Implementation Summary</h3>
        <ul>
            <li><strong>Removed Required Validation:</strong> Status field is now optional</li>
            <li><strong>Removed Asterisk (*):</strong> No visual indication of required field</li>
            <li><strong>Added Empty Option:</strong> "-- Select Status (Optional) --"</li>
            <li><strong>Ensured Active/Inactive Options:</strong> Created seeder and setup script</li>
        </ul>
    </div>

    <div class="test-section">
        <h3>üß™ Status Field Test</h3>

        <form id="status-test-form">
            <div class="form-group">
                <label for="status_id">Status:</label>
                <select name="status_id" id="status_id">
                    <option value="">-- Select Status (Optional) --</option>
                    <option value="1">Active</option>
                    <option value="2">Inactive</option>
                    <option value="3">On Leave</option>
                    <option value="4">Terminated</option>
                    <option value="5">Suspended</option>
                </select>
                <small>This field is optional - you can leave it blank</small>
            </div>

            <div class="form-group">
                <button type="button" class="btn btn-primary" onclick="testOptionalField()">
                    Test Optional Validation
                </button>
                <button type="button" class="btn btn-success" onclick="simulateFormSubmission()">
                    Simulate Form Submission
                </button>
            </div>
        </form>

        <div id="test-results"></div>
    </div>

    <div class="test-section">
        <h3>üìä Status Options Explanation</h3>
        <table style="width: 100%; border-collapse: collapse;">
            <tr style="background: #f8f9fa;">
                <th style="border: 1px solid #ddd; padding: 8px;">Status</th>
                <th style="border: 1px solid #ddd; padding: 8px;">Description</th>
                <th style="border: 1px solid #ddd; padding: 8px;">Use Case</th>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;"><strong>Active</strong></td>
                <td style="border: 1px solid #ddd; padding: 8px;">Employee is currently working</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Normal working employees</td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;"><strong>Inactive</strong></td>
                <td style="border: 1px solid #ddd; padding: 8px;">Employee is not currently working</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Temporarily not working, on break</td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">On Leave</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Employee is on approved leave</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Vacation, sick leave, maternity leave</td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Terminated</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Employment has been terminated</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Fired, laid off, contract ended</td>
            </tr>
            <tr>
                <td style="border: 1px solid #ddd; padding: 8px;">Suspended</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Temporarily suspended from work</td>
                <td style="border: 1px solid #ddd; padding: 8px;">Disciplinary action, investigation</td>
            </tr>
            <tr style="background: #fff3cd;">
                <td style="border: 1px solid #ddd; padding: 8px;"><em>Empty/Null</em></td>
                <td style="border: 1px solid #ddd; padding: 8px;">No status assigned</td>
                <td style="border: 1px solid #ddd; padding: 8px;">New employees, status not yet determined</td>
            </tr>
        </table>
    </div>

    <div class="test-section">
        <h3>üîß Database Setup</h3>
        <p><strong>To set up status options, run:</strong></p>
        <div style="background: #f8f9fa; padding: 10px; border: 1px solid #dee2e6; font-family: monospace;">
            <a href="setup_status_options.php" target="_blank">http://localhost/ttphrm/setup_status_options.php</a>
        </div>
        <p><strong>To check current status options:</strong></p>
        <div style="background: #f8f9fa; padding: 10px; border: 1px solid #dee2e6; font-family: monospace;">
            <a href="check_status_field.php" target="_blank">http://localhost/ttphrm/check_status_field.php</a>
        </div>
    </div>

    <script>
    // Test optional field validation
    function testOptionalField() {
        var statusValue = document.getElementById('status_id').value;
        var resultsDiv = document.getElementById('test-results');

        var result = '<div class="result">';
        result += '<h4>Optional Field Test Results:</h4>';

        if (!statusValue || statusValue === '') {
            result += '<p>‚úÖ Status field is empty - this should be allowed (optional)</p>';
            result += '<p>üîç Validation: No errors should occur</p>';
            result += '<p>üóÑÔ∏è Database value: NULL</p>';
            result += '<p><strong>Status:</strong> <span style="color: green;">‚úÖ VALID (Optional field)</span></p>';
        } else {
            result += '<p>‚ÑπÔ∏è Status field has value: ' + getStatusText(statusValue) + '</p>';
            result += '<p>üîç Validation: Should pass normally</p>';
            result += '<p>üóÑÔ∏è Database value: ' + statusValue + '</p>';
            result += '<p><strong>Status:</strong> <span style="color: green;">‚úÖ VALID (Value selected)</span></p>';
        }

        result += '</div>';
        resultsDiv.innerHTML = result;
    }

    // Get status text by value
    function getStatusText(value) {
        var options = {
            '1': 'Active',
            '2': 'Inactive',
            '3': 'On Leave',
            '4': 'Terminated',
            '5': 'Suspended'
        };
        return options[value] || 'Unknown';
    }

    // Simulate form submission
    function simulateFormSubmission() {
        var statusValue = document.getElementById('status_id').value;
        var resultsDiv = document.getElementById('test-results');

        var result = '<div class="result" style="background: #e7f3ff;">';
        result += '<h4>Form Submission Simulation:</h4>';

        result += '<p><strong>Selected Value:</strong> ' + (statusValue || 'Empty (NULL)') + '</p>';

        if (statusValue) {
            result += '<p><strong>Selected Status:</strong> ' + getStatusText(statusValue) + '</p>';
        }

        result += '<p><strong>Controller Processing:</strong></p>';
        result += '<code>$data[\'status_id\'] = $request->status_id;</code><br>';

        if (!statusValue) {
            result += '<p><strong>Database Value:</strong> NULL</p>';
            result += '<p><strong>Employee Record:</strong> Employee created/updated with no status</p>';
        } else {
            result += '<p><strong>Database Value:</strong> ' + statusValue + '</p>';
            result += '<p><strong>Employee Record:</strong> Employee has status: ' + getStatusText(statusValue) + '</p>';
        }

        result += '<p><strong>Validation Result:</strong> <span style="color: green;">‚úÖ PASS</span> (No validation errors)</p>';
        result += '<p><strong>Form Result:</strong> <span style="color: green;">‚úÖ SUCCESS</span> (Form submits successfully)</p>';

        result += '</div>';
        resultsDiv.innerHTML = result;
    }

    // Initialize page
    document.addEventListener('DOMContentLoaded', function() {
        console.log('Status field test page loaded');
        console.log('Testing optional status field functionality');
    });
    </script>
</body>
</html>